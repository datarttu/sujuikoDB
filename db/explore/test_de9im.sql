/*
BEGIN;

DROP TABLE IF EXISTS de9im_testing;
CREATE TABLE de9im_testing (
  fid         serial      PRIMARY KEY,
  gid         integer,
  side        integer,
  geom        geometry(LINESTRING, 3067)
);

INSERT INTO de9im_testing ("geom" , "gid", "side") VALUES ('0102000020FB0B000002000000A08F7E35C4A81741F0C4682F517859419B4AF6B31DA9174102F5BFA855785941', 1, 1);
INSERT INTO de9im_testing ("geom" , "gid", "side") VALUES ('0102000020FB0B0000020000009B4AF6B31DA9174102F5BFA855785941C3E5B2DDEAA81741D371ADEC5B785941', 1, 2);
INSERT INTO de9im_testing ("geom" , "gid", "side") VALUES ('0102000020FB0B0000050000007FFBE3E0D6A817417A0C2918447859411EAABCE473A8174107F1E5983E785941F2A9F74BD5A81741065D170B39785941C89067A82FA9174153982A473F7859417FFBE3E0D6A817417A0C291844785941', 2, 1);
INSERT INTO de9im_testing ("geom" , "gid", "side") VALUES ('0102000020FB0B0000020000007FFBE3E0D6A817417A0C291844785941ADDD7276D9A817415040D35949785941', 2, 2);
INSERT INTO de9im_testing ("geom" , "gid", "side") VALUES ('0102000020FB0B0000050000000EEDDCB3F1A91741A6C5344344785941AD9BB5B78EA9174133AAF1C33E785941819BF01EF0A9174132162336397859415782607B4AAA17417F5136723F7859410EEDDCB3F1A91741A6C5344344785941', 3, 1);
INSERT INTO de9im_testing ("geom" , "gid", "side") VALUES ('0102000020FB0B0000020000005782607B4AAA17417F5136723F78594168D29C0EADAA17419F757D323F785941', 3, 2);
INSERT INTO de9im_testing ("geom" , "gid", "side") VALUES ('0102000020FB0B000005000000A0C84875EFA91741E39181E32F7859413F7721798CA9174170763E642A78594113775CE0EDA917416FE26FD624785941E95DCC3C48AA1741BC1D83122B785941A0C84875EFA91741E39181E32F785941', 4, 1);
INSERT INTO de9im_testing ("geom" , "gid", "side") VALUES ('0102000020FB0B000002000000F258BB62B5A91741EE4EE4A92C785941AA19AB5736AA1741FCD86CD629785941', 4, 2);
INSERT INTO de9im_testing ("geom" , "gid", "side") VALUES ('0102000020FB0B00000200000059A9D62FB6A91741F8B6DD834F785941BE050DC717AA17410CAF471155785941', 5, 1);
INSERT INTO de9im_testing ("geom" , "gid", "side") VALUES ('0102000020FB0B00000200000069409EBCDCA91741968358B551785941223BC6755BAA1741EA98177450785941', 5, 2);
*/

SELECT
  a.gid,
  a.side AS a_side,
  b.side AS b_side,
  ST_Relate(a.geom, b.geom),
  ST_Relate(b.geom, a.geom) AS rev_relate,
  ST_Relate(b.geom, a.geom) = ST_Relate(a.geom, b.geom) AS same_relate
FROM de9im_testing AS a
INNER JOIN de9im_testing AS b
ON a.gid = b.gid
WHERE a.side = 1 AND b.side = 2
ORDER BY a.gid;
